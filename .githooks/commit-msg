#!/bin/bash

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

if ! echo "$commit_msg" | grep -qE '^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert|merge)(\(.+\))?: .+'; then
    echo "ERROR: Commit message does not follow conventional commit format."
    echo ""
    echo "Commit message format:"
    echo "  <type>(<scope>): <subject>"
    echo ""
    echo "Your commit message:"
    echo "  $commit_msg"
    echo ""
    echo "For reference: https://www.conventionalcommits.org/en/v1.0.0/"
    exit 1
fi

